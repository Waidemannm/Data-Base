
DROP TABLE T_SAK_EXECUCAO_PROJ CASCADE CONSTRAINTS;
DROP TABLE T_SAK_FUNCIONARIO_ENDERECO CASCADE CONSTRAINTS;
DROP TABLE T_SAK_TELEFONE CASCADE CONSTRAINTS;
DROP TABLE T_SAK_DEPENDENTE CASCADE CONSTRAINTS;
DROP TABLE T_SAK_FUNCIONARIO CASCADE CONSTRAINTS;
DROP TABLE T_SAK_PROJETO CASCADE CONSTRAINTS;
DROP TABLE T_SAK_ENDERECO CASCADE CONSTRAINTS;
DROP TABLE T_SAK_BAIRRO CASCADE CONSTRAINTS;
DROP TABLE T_SAK_CIDADE CASCADE CONSTRAINTS;
DROP TABLE T_SAK_ESTADO CASCADE CONSTRAINTS;
DROP TABLE T_SAK_DEPTO CASCADE CONSTRAINTS;
DROP TABLE T_SAK_TIPO_ENDERECO CASCADE CONSTRAINTS;


CREATE TABLE T_SAK_BAIRRO (
    CD_BAIRRO  NUMBER(4) NOT NULL,
    CD_CIDADE  NUMBER(3) NOT NULL,
    NM_BAIRRO  VARCHAR2(50) NOT NULL
);

ALTER TABLE T_SAK_BAIRRO ADD CONSTRAINT PK_SAK_BAIRRO PRIMARY KEY ( CD_BAIRRO );

CREATE TABLE T_SAK_CIDADE (
    CD_CIDADE  NUMBER(3) NOT NULL,
    CD_ESTADO  NUMBER(2) NOT NULL,
    NM_CIDADE  VARCHAR2(50) NOT NULL
);

ALTER TABLE T_SAK_CIDADE ADD CONSTRAINT PK_SAK_CIDADE PRIMARY KEY ( CD_CIDADE );

CREATE TABLE T_SAK_DEPENDENTE (
    CD_FUNC        NUMBER(5) NOT NULL,
    ID_DEPENDENTE  NUMBER(3) NOT NULL,
    NM_DEPENDENTE  VARCHAR2(50) NOT NULL,
    DT_NASCIMENTO  DATE NOT NULL,
    ST_DEPENDENTE  VARCHAR2(10) NOT NULL
);

ALTER TABLE T_SAK_DEPENDENTE
    ADD CONSTRAINT CK_SAK_DEPENDENTE_STATUS CHECK ( ST_DEPENDENTE IN (
        'ATIVO',
        'INATIVO'
    ) );

ALTER TABLE T_SAK_DEPENDENTE ADD CONSTRAINT PK_SAK_DEPENDENTE PRIMARY KEY ( ID_DEPENDENTE,
                                                                            CD_FUNC );

CREATE TABLE T_SAK_DEPTO (
    CD_DEPTO  NUMBER(4) NOT NULL,
    NM_DEPTO  VARCHAR2(60) NOT NULL,
    SG_DEPTO  CHAR(3) NOT NULL
);

ALTER TABLE T_SAK_DEPTO ADD CONSTRAINT PK_SAK_DEPTO PRIMARY KEY ( CD_DEPTO );

ALTER TABLE T_SAK_DEPTO ADD CONSTRAINT UN_SAK_DEPTO_NOME UNIQUE ( NM_DEPTO );

ALTER TABLE T_SAK_DEPTO ADD CONSTRAINT UK_SAK_DEPTO_SIGLA UNIQUE ( SG_DEPTO );

CREATE TABLE T_SAK_ENDERECO (
    CD_END_CORREIO  NUMBER NOT NULL,
    CD_BAIRRO       NUMBER(4) NOT NULL,
    NR_CEP          NUMBER(10) NOT NULL,
    DS_LOGRADOURO   VARCHAR2(30) NOT NULL
);

ALTER TABLE T_SAK_ENDERECO ADD CONSTRAINT PK_SAK_ENDERECO_CORREIO PRIMARY KEY ( CD_END_CORREIO );

CREATE TABLE T_SAK_ESTADO (
    CD_ESTADO  NUMBER(2) NOT NULL,
    NM_ESTADO  VARCHAR2(20) NOT NULL,
    SG_ESTADO  CHAR(2) NOT NULL
);

ALTER TABLE T_SAK_ESTADO ADD CONSTRAINT PK_SAK_ESTADO PRIMARY KEY ( CD_ESTADO );

CREATE TABLE T_SAK_EXECUCAO_PROJ (
    CD_PROJETO          NUMBER(10) NOT NULL,
    CD_IMPLANTACAO      NUMBER(3) NOT NULL,
    CD_FUNC             NUMBER(5) NOT NULL,
    DS_PAPEL_FUNC_PROJ  VARCHAR2(30),
    DT_ENTRADA          DATE NOT NULL,
    DT_SAIDA            DATE
);

ALTER TABLE T_SAK_EXECUCAO_PROJ ADD CONSTRAINT PK_SAK_IMPLANTACAO PRIMARY KEY ( CD_IMPLANTACAO,
                                                                                CD_PROJETO );

CREATE TABLE T_SAK_FUNCIONARIO (
    CD_FUNC          NUMBER(5) NOT NULL,
    CD_DEPTO         NUMBER(4) NOT NULL,
    NM_FUNCIONARIO   VARCHAR2(60) NOT NULL,
    DT_NASCIMENTO    DATE NOT NULL,
    DS_ESTADO_CIVIL  VARCHAR2(20),
    VL_SALARIO       NUMBER(10, 2) NOT NULL,
    DT_ADMISSAO      DATE NOT NULL
);

ALTER TABLE T_SAK_FUNCIONARIO ADD CONSTRAINT PK_SAK_FUNCIONARIO PRIMARY KEY ( CD_FUNC );

CREATE TABLE T_SAK_FUNCIONARIO_ENDERECO (
    CD_FUNC           NUMBER(5) NOT NULL,
    CD_END_FUNC       NUMBER(8) NOT NULL,
    CD_END_CORREIO    NUMBER NOT NULL,
    CD_TIPO_ENDERECO  NUMBER(4) NOT NULL,
    DS_COMPLEMENTO    VARCHAR2(30),
    NR_LOGRADOURO     NUMBER(5) NOT NULL
);

ALTER TABLE T_SAK_FUNCIONARIO_ENDERECO ADD CONSTRAINT PK_SAK_FUNCIONARIO_ENDERECO PRIMARY KEY ( CD_END_FUNC,
                                                                                                CD_FUNC );

CREATE TABLE T_SAK_PROJETO (
    CD_PROJETO         NUMBER(10) NOT NULL,
    NM_PROJETO         VARCHAR2(40) NOT NULL,
    VL_BUDGET_PROJETO  NUMBER(10, 2) NOT NULL,
    DT_INICIO          DATE NOT NULL,
    DT_TERMINO         DATE
);

ALTER TABLE T_SAK_PROJETO ADD CONSTRAINT PK_SAK_PROJETO PRIMARY KEY ( CD_PROJETO );

ALTER TABLE T_SAK_PROJETO ADD CONSTRAINT UN_SAK_PROJETO_NOME UNIQUE ( NM_PROJETO );

CREATE TABLE T_SAK_TELEFONE (
    CD_FUNC      NUMBER(5) NOT NULL,
    CD_TELEFONE  NUMBER(3) NOT NULL,
    NR_DDD       NUMBER(3) NOT NULL,
    NR_TELEFONE  NUMBER(8) NOT NULL
);

ALTER TABLE T_SAK_TELEFONE ADD CONSTRAINT PK_SAK_TELEFONE PRIMARY KEY ( CD_TELEFONE,
                                                                        CD_FUNC );

CREATE TABLE T_SAK_TIPO_ENDERECO (
    CD_TIPO_ENDERECO  NUMBER(4) NOT NULL,
    NM_TIPO_ENDERECO  VARCHAR2(20) NOT NULL
);



ALTER TABLE T_SAK_TIPO_ENDERECO ADD CONSTRAINT PK_SAK_TIPO_ENDERECO PRIMARY KEY ( CD_TIPO_ENDERECO );

ALTER TABLE T_SAK_ENDERECO
    ADD CONSTRAINT FK_SAK_BAIRRO_ENDERECO FOREIGN KEY ( CD_BAIRRO )
        REFERENCES T_SAK_BAIRRO ( CD_BAIRRO );

ALTER TABLE T_SAK_BAIRRO
    ADD CONSTRAINT FK_SAK_CIDADE_BAIRRO FOREIGN KEY ( CD_CIDADE )
        REFERENCES T_SAK_CIDADE ( CD_CIDADE );

ALTER TABLE T_SAK_FUNCIONARIO
    ADD CONSTRAINT FK_SAK_DEPTO_FUNC FOREIGN KEY ( CD_DEPTO )
        REFERENCES T_SAK_DEPTO ( CD_DEPTO );

ALTER TABLE T_SAK_FUNCIONARIO_ENDERECO
    ADD CONSTRAINT FK_SAK_END_CORREIO_FUNC FOREIGN KEY ( CD_END_CORREIO )
        REFERENCES T_SAK_ENDERECO ( CD_END_CORREIO );

ALTER TABLE T_SAK_CIDADE
    ADD CONSTRAINT FK_SAK_ESTADO_CIDADE FOREIGN KEY ( CD_ESTADO )
        REFERENCES T_SAK_ESTADO ( CD_ESTADO );

ALTER TABLE T_SAK_DEPENDENTE
    ADD CONSTRAINT FK_SAK_FUNC_DEPENDENTE FOREIGN KEY ( CD_FUNC )
        REFERENCES T_SAK_FUNCIONARIO ( CD_FUNC );

ALTER TABLE T_SAK_FUNCIONARIO_ENDERECO
    ADD CONSTRAINT FK_SAK_FUNC_ENDERECO FOREIGN KEY ( CD_FUNC )
        REFERENCES T_SAK_FUNCIONARIO ( CD_FUNC );

ALTER TABLE T_SAK_EXECUCAO_PROJ
    ADD CONSTRAINT FK_SAK_FUNC_EXEC_PROJ FOREIGN KEY ( CD_FUNC )
        REFERENCES T_SAK_FUNCIONARIO ( CD_FUNC );

ALTER TABLE T_SAK_TELEFONE
    ADD CONSTRAINT FK_SAK_FUNC_TELEFONE FOREIGN KEY ( CD_FUNC )
        REFERENCES T_SAK_FUNCIONARIO ( CD_FUNC );

ALTER TABLE T_SAK_EXECUCAO_PROJ
    ADD CONSTRAINT FK_SAK_PROJ_EXEC_PROJ FOREIGN KEY ( CD_PROJETO )
        REFERENCES T_SAK_PROJETO ( CD_PROJETO );

ALTER TABLE T_SAK_FUNCIONARIO_ENDERECO
    ADD CONSTRAINT FK_SAK_TIPO_ENDERECO FOREIGN KEY ( CD_TIPO_ENDERECO )
        REFERENCES T_SAK_TIPO_ENDERECO ( CD_TIPO_ENDERECO );
        
        
INSERT INTO T_SAK_ESTADO VALUES (1, 'SÃO PAULO', 'SP');

INSERT INTO T_SAK_CIDADE (CD_CIDADE, CD_ESTADO, NM_CIDADE) 
    VALUES(1, (SELECT CD_ESTADO FROM T_SAK_ESTADO WHERE CD_ESTADO = 1) , 'SÃO PAULO');

INSERT INTO T_SAK_BAIRRO (CD_BAIRRO , CD_CIDADE, NM_BAIRRO) 
    VALUES(1, (SELECT CD_CIDADE FROM T_SAK_CIDADE WHERE CD_CIDADE = 1) , 'ENGENHEIRO GOULART');
    
INSERT INTO T_SAK_ENDERECO (CD_END_CORREIO, CD_BAIRRO, NR_CEP ,DS_LOGRADOURO) 
    VALUES(1, (SELECT CD_BAIRRO FROM T_SAK_BAIRRO WHERE CD_BAIRRO = 1) ,03726100 ,'RUA AGUSTO CORREA LEITE');


INSERT INTO T_SAK_ESTADO VALUES (2, 'BAHIA', 'BA');

INSERT INTO T_SAK_CIDADE (CD_CIDADE, CD_ESTADO, NM_CIDADE) 
    VALUES(2, (SELECT CD_ESTADO FROM T_SAK_ESTADO WHERE CD_ESTADO = 2) , 'JUAZEIRO');

INSERT INTO T_SAK_BAIRRO (CD_BAIRRO , CD_CIDADE, NM_BAIRRO) 
    VALUES(2, (SELECT CD_CIDADE FROM T_SAK_CIDADE WHERE CD_CIDADE = 2) , 'JOÃO CABRAL');

INSERT INTO T_SAK_ENDERECO (CD_END_CORREIO, CD_BAIRRO, NR_CEP ,DS_LOGRADOURO) 
    VALUES(2, (SELECT CD_BAIRRO FROM T_SAK_BAIRRO WHERE CD_BAIRRO = 2) ,04870558 ,'RUA ANDRÉ LUIZ');


INSERT INTO T_SAK_CIDADE (CD_CIDADE, CD_ESTADO, NM_CIDADE) 
    VALUES(3, (SELECT CD_ESTADO FROM T_SAK_ESTADO WHERE CD_ESTADO = 1) , 'OSASCO');

INSERT INTO T_SAK_BAIRRO (CD_BAIRRO , CD_CIDADE, NM_BAIRRO) 
    VALUES(3, (SELECT CD_CIDADE FROM T_SAK_CIDADE WHERE CD_CIDADE = 1) , 'JARDIM DAS FLORES');

INSERT INTO T_SAK_ENDERECO (CD_END_CORREIO, CD_BAIRRO, NR_CEP ,DS_LOGRADOURO) 
    VALUES(3, (SELECT CD_BAIRRO FROM T_SAK_BAIRRO WHERE CD_BAIRRO = 3) ,04849311 ,'RUA FLOR LIZ');  


DELETE FROM T_SAK_ENDERECO WHERE CD_END_CORREIO = 3;


INSERT INTO T_SAK_DEPTO VALUES (1, 'Recursos Humanos', 'RH');

INSERT INTO T_SAK_DEPTO VALUES (2, 'Departamento Pessoal', 'DP');

INSERT INTO T_SAK_DEPTO VALUES (3, 'Departamento de Benefícios', 'DB');


INSERT INTO TABLE T_SAK_FUNCIONARIO_ENDERECO (1, 'Casa');

INSERT INTO TABLE T_SAK_FUNCIONARIO_ENDERECO (1, 'Apartamento');

INSERT INTO T_SAK_FUNCIONARIO (CD_FUNC, CD_DEPTO, NM_FUNCIONARIO, DT_NASCIMENTO, DS_ESTADO_CIVIL, VL_SALARIO, DT_ADMISSAO) 
    VALUES (1, (SELECT CD_DEPTO FROM T_SAK_DEPTO WHERE CD_DEPTO = 2), 'Alexandre', 
    TO_DATE('14/04/1980', 'DD/MM/YYYY'), 'Solteiro', 5.500, TO_DATE('12/09/2019', 'DD/MM/YYYY'));
    
INSERT INTO T_SAK_FUNCIONARIO (CD_FUNC, CD_DEPTO, NM_FUNCIONARIO, DT_NASCIMENTO, DS_ESTADO_CIVIL, VL_SALARIO, DT_ADMISSAO) 
    VALUES (2, (SELECT CD_DEPTO FROM T_SAK_DEPTO WHERE CD_DEPTO = 2), 'Luana', 
    TO_DATE('16/09/1999', 'DD/MM/YYYY'), 'Solteira', 3.500, TO_DATE('22/09/2022', 'DD/MM/YYYY'));
    
INSERT INTO T_SAK_FUNCIONARIO (CD_FUNC, CD_DEPTO, NM_FUNCIONARIO, DT_NASCIMENTO, DS_ESTADO_CIVIL, VL_SALARIO, DT_ADMISSAO) 
    VALUES (3, (SELECT CD_DEPTO FROM T_SAK_DEPTO WHERE CD_DEPTO = 1), 'Bruna', 
    TO_DATE('30/07/2006', 'DD/MM/YYYY'), 'Solteira', 4.700, TO_DATE('24/01/2023', 'DD/MM/YYYY'));
    
INSERT INTO T_SAK_FUNCIONARIO_ENDERECO (CD_FUNC, CD_END_FUNC, CD_END_CORREIO, CD_TIPO_ENDERECO, DS_COMPLEMENTO, NR_LOGRADOURO) 
    VALUES ((SELECT CD_FUNC FROM T_SAK_FUNCIONARIO WHERE CD_FUNC = 3),1, 
    (SELECT CD_END_CORREIO FROM T_SAK_ENDERECO WHERE CD_END_CORREIO = 1),1 , 'Portão Preto', 660);
    
INSERT INTO T_SAK_FUNCIONARIO_ENDERECO (CD_FUNC, CD_END_FUNC, CD_END_CORREIO, CD_TIPO_ENDERECO, DS_COMPLEMENTO, NR_LOGRADOURO) 
    VALUES ((SELECT CD_FUNC FROM T_SAK_FUNCIONARIO WHERE CD_FUNC = 1),2, 
    (SELECT CD_END_CORREIO FROM T_SAK_ENDERECO WHERE CD_END_CORREIO = 2),1, 'Casa com muro branco', 50);
    
INSERT INTO T_SAK_FUNCIONARIO_ENDERECO (CD_FUNC, CD_END_FUNC, CD_END_CORREIO, CD_TIPO_ENDERECO, DS_COMPLEMENTO, NR_LOGRADOURO) 
    VALUES ((SELECT CD_FUNC FROM T_SAK_FUNCIONARIO WHERE CD_FUNC = 2),3, 
    (SELECT CD_END_CORREIO FROM T_SAK_ENDERECO WHERE CD_END_CORREIO = 2),1 , 'Portão Preto', 77);
    
UPDATE T_SAK_FUNCIONARIO SET VL_SALARIO = VL_SALARIO * 1.4723;

INSERT INTO T_SAK_PROJETO VALUES (1, 'PetSOS', 7890.0, TO_DATE('05/02/2025', 'DD/MM/YYYY'), TO_DATE('09/09/2025', 'DD/MM/YYYY'));


INSERT INTO T_SAK_FUNCIONARIO (CD_FUNC, CD_DEPTO, NM_FUNCIONARIO, DT_NASCIMENTO, DS_ESTADO_CIVIL, VL_SALARIO, DT_ADMISSAO) 
    VALUES (4, (SELECT CD_DEPTO FROM T_SAK_DEPTO WHERE CD_DEPTO = 2), 'TESTE DA APLICAÇÃO', 
    TO_DATE('04/07/1984', 'DD/MM/YYYY'), 'Casado', 8.700, TO_DATE('28/07/2015', 'DD/MM/YYYY'));
 
UPDATE T_SAK_FUNCIONARIO SET VL_SALARIO = 6.700 WHERE CD_FUNC = 4;

INSERT INTO T_SAK_TELEFONE (CD_FUNC, CD_TELEFONE, NR_DDD, NR_TELEFONE) VALUES ((SELECT CD_FUNC FROM T_SAK_FUNCIONARIO WHERE CD_FUNC = 4), 1, 11, 2345);

DELETE T_SAK_TELEFONE WHERE CD_TELEFONE = 1;